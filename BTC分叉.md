## 分叉

### state fork

对当前状态有意见分歧

**fork attack**

### BTC协议升级

去中心化的系统里，没有办法保证所有的节点升级了软件，也叫protocal fork

**硬分叉**

旧节点认为新的协议是非法的，新节点认可旧的节点，例如修改block size limit。

- 新节点会认为两条链都是合法的，大区块的分叉会越来越长。
- 旧节点，认为新的区块不合法，会永远顺着旧分叉一直挖。
- 两条平行运行的链，相当于两种币了，不能互相转。

两条平行的链，会有双花问题，后来每条链需要加一个chainId

**软分叉**

如果对BTC加限制，在协议上加限制，原先合法的某些交易会变的不合法。

例如将区块大小，block size limit -> 0.5 M

- 新节点会分叉，认为原先的不合法
- 旧节点认为新链是最长合法链，旧节点就会切换

软分叉就是某分叉是暂时的，会被放弃掉，不会有永久性的分叉。

