## btc密码学原理
加密货币是不加密的，区块链的所有的交易内容都是公开的，包括账户地址和转账金额等。

密码学主要用到了密码学中的hash和签名

### hash

密码学中用到的函数叫crytographic hash function, 有两个性质。

#### Collision resistence

如果有x != y, 有H(x) == H(y), 则被称为哈希碰撞。

一般来说哈希碰撞是很难避免，因为输入空间远大于输出空间。

Collision resistence是指，没有高效的方法去制造哈希碰撞。只能靠暴力求解，而这个在实际情况下是不可解的。

所以，这个性质可以用来生成msg的签名。用来检测对于msg的篡改，因为如果msg被修改，hash值也会随之改变。

另外，md5作为著名的哈希函数，已经被破解了，不能用作签名函数。

#### hiding

给定H(x)的值，无法反推出输入x的值。也就是说，H(x)没有泄露有关x的信息。

- 输入空间X足够大, 暴力搜索不可能算出来
- 输入空间x分布比较均匀, 很难推测x的值

**digital commitment**

预测结果是不能公布的，因为预测结果本身可能会影响到结果本身。

将预测结果作为输入x, 计算哈希值有y = H(x), 并将y公布。等到结果出现，再将预测结果公布，并计算哈希值和y进行对比。

#### puzzle friendly

哈希值的计算，事先不可预测，光看输入，很难推测H(x)是多少。

**挖矿计算**

Nonce是一个随机数

```
H(block header + nonce) <= target
```

为了求出随机数nonce，只能暴力求解，没有别的办法。

### btc

#### SHA-256函数

BTC用的哈希函数是SHA-256(secure hash algrithm)，满足上述所有性质。

#### 账户管理

在本地创建一个公私钥对，就是btc中的一个账户。

非对称加密：https://juejin.cn/post/6844903584073515016

公钥就相对于银行账号，私钥就相当于账户密码。

那么如果我想给某人转10个BTC，就需要将交易发布到区块链上，那么别人怎么知道这个交易是我发起的而非冒名顶替的。这就需要我用自己的私钥对这个交易进行签名，其他人用我的公钥对交易进行验证。



### FAQ

既然BTC的账户是一对公私钥对，那么万一两个人生成了一样的公私钥对怎么办，那么就可以偷走另一外一个人的BTC？

答：实际不可行，产生相同公私钥对的可能性微乎其微，这个概率比地球爆炸的概率还小。